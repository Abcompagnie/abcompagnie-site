image: node:22

stages:
  - build
  - deploy

cache:
  paths:
    - node_modules/

build:
  stage: build
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/
  only:
    - main

deploy:
  stage: deploy
  image: alpine:latest
  before_script:
    - apk add --no-cache lftp
  script:
    - echo "DÃ©ploiement vers cPanel via FTP..."
    - lftp -c "
        set ftp:ssl-allow no;
        open -u $FTP_USER,$FTP_PASS $FTP_HOST;
        mirror -R --delete --verbose dist/ $FTP_DIR
      "
  only:
<<<<<<< HEAD
    - main
=======
    - main
>>>>>>> b659f717ce86a131e5e6a3cef8eb1e391b4e56c9
